graph TB
    User["ğŸ‘¤ Customer Request<br/>'I need 5 Carbonara orders for a party'"]

    subgraph Manager["ModernPastaFactorySystem"]
        Kernel["Shared Kernel<br/>+ Azure OpenAI Service<br/>+ PastaFactoryPlugin"]
    end

    Coordinator["ğŸ”„ Factory Coordinator<br/>Routes to Specialist<br/>Analyzes Request"]

    subgraph Specialists["Specialist Agents with State Access"]
        Orders["ğŸ“‹ Order Manager<br/>Customer Service & Workflow"]
        Kitchen["ğŸ‘¨â€ğŸ³ Kitchen Manager<br/>Resource Allocation & Cooking"]
        Quality["â­ Quality Manager<br/>Standards & Excellence"]
    end

    subgraph State["PastaFactoryState (KernelBaseModel)"]
        OrdersDict["ğŸ Orders Dict<br/>+ is_ready()<br/>+ get_order_details()"]
        Resources["ğŸª Kitchen Resources<br/>+ is_available()<br/>+ get_resource_status()"]
        Metrics["ğŸ“Š Factory Metrics<br/>Completed Orders<br/>Daily Special, Efficiency"]
    end

    Response["ğŸ“„ Specialist Response<br/>with Factory Analytics<br/>+ Workflow Coordination"]

    User -->|Factory Request| Manager
    Manager -->|Route| Coordinator

    Coordinator -->|Primary Agent| Orders
    Coordinator -.->|Or Route to| Kitchen
    Coordinator -.->|Or Route to| Quality

    Orders <-->|Read/Write State| State
    Kitchen <-.->|Read/Write State| State
    Quality <-.->|Read State| State

    State -->|State Data| OrdersDict
    State -->|State Data| Resources
    State -->|State Data| Metrics

    Orders -->|Response + Analytics| Response
    Kitchen -.->|Response + Analytics| Response
    Quality -.->|Response + Analytics| Response

    Response -->|Display| User

    style User fill:#e1f5ff,stroke:#333,stroke-width:3px
    style Manager fill:#ffd700,stroke:#333,stroke-width:3px
    style Coordinator fill:#ffb366,stroke:#333,stroke-width:3px
    style Orders fill:#90ee90,stroke:#333,stroke-width:3px
    style Kitchen fill:#ffa8d5,stroke:#333,stroke-width:2px
    style Quality fill:#ffa8d5,stroke:#333,stroke-width:2px
    style State fill:#d4edda,stroke:#333,stroke-width:4px
    style OrdersDict fill:#e8f5e9,stroke:#333,stroke-width:2px
    style Resources fill:#e8f5e9,stroke:#333,stroke-width:2px
    style Metrics fill:#e8f5e9,stroke:#333,stroke-width:2px
    style Response fill:#ffeb99,stroke:#333,stroke-width:3px